<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bracket Liga LEGENDS</title>
<style>
  body{
    margin:0;
    font-family:Arial,Helvetica,sans-serif;
    background:#0c1220;
    color:#fff;
  }
  h1{text-align:center;padding:16px;color:#4cc9f0}

  .bracket{
    display:flex;
    gap:40px;
    padding:20px;
    overflow-x:auto;
    justify-content:center;
  }
  .round{
    display:flex;
    flex-direction:column;
    justify-content:center;
    gap:40px;
    min-width:220px;
    flex-shrink:0;
  }
  .round h2{
    text-align:center;
    font-size:.95rem;
    color:#27e1a0;
    margin-bottom:8px;
  }
  .match{
    background:#162447;
    border:2px solid #2b3b66;
    border-radius:10px;
    box-shadow:0 4px 12px rgba(0,0,0,0.4);
    padding:10px;
    text-align:center;
  }
  table{
    border-collapse:collapse;
    width:100%;
    background:#101820;
    color:#fff;
    font-weight:bold;
  }
  td,th{
    border:1px solid #444;
    padding:4px 6px;
    text-align:center;
    font-size:.85rem;
  }
  th{background:#1f4068;color:#27e1a0}
  tr.team td:first-child{
    background:#1b263b;
    text-align:left;
  }
  .scores input{
    width:36px;
    text-align:center;
    padding:3px;
    border:none;
    background:#0a1330;
    color:#fff;
    border-radius:6px;
  }
  .next{
    margin-top:6px;
    padding:6px 10px;
    background:#1f4068;
    border-radius:6px;
    font-size:.8rem;
    font-weight:bold;
    color:#27e1a0;
    border:2px solid #27e1a0;
  }
  .win{background:#14532d !important;color:#27e1a0}
  .lose{background:#432121 !important;color:#f5a9a9}
  @media(max-width:600px){
    .round{min-width:180px}
    .scores input{width:30px}
  }
</style>
</head>
<body>
<h1>Postemporada Liga LEGENDS</h1>

<div class="bracket">
  <!-- Cuartos -->
  <div class="round">
    <h2>Cuartos</h2>
    <div class="match" data-id="QF1" data-next="SF1">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>MIL</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>NYM</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
    <div class="match" data-id="QF2" data-next="SF1">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>DET</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>LAD</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
    <div class="match" data-id="QF3" data-next="SF2">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>TOR</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>SEA</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
    <div class="match" data-id="QF4" data-next="SF2">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>CHC</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>SDP</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
  </div>

  <!-- Semifinales -->
  <div class="round">
    <h2>Semifinales</h2>
    <div class="match" data-id="SF1" data-next="FINAL">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>GAN QF1</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>GAN QF2</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
    <div class="match" data-id="SF2" data-next="FINAL">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>GAN QF3</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>GAN QF4</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Ganador</div>
    </div>
  </div>

  <!-- Final -->
  <div class="round">
    <h2>Final</h2>
    <div class="match" data-id="FINAL">
      <table>
        <tr><th></th><th>J1</th><th>J2</th><th>J3</th></tr>
        <tr class="team"><td>GAN SF1</td><td><input></td><td><input></td><td><input></td></tr>
        <tr class="team"><td>GAN SF2</td><td><input></td><td><input></td><td><input></td></tr>
      </table>
      <div class="next">Campe√≥n</div>
    </div>
  </div>
</div>

<script>
function parseScore(val){
  if(!val.includes("-")) return null;
  const [a,b]=val.split("-").map(x=>parseInt(x.trim(),10));
  if(isNaN(a)||isNaN(b)) return null;
  return {a,b};
}

function updateMatch(match){
  const rows=match.querySelectorAll("tr.team");
  const inputs=match.querySelectorAll(".scores input");
  let wins=[0,0];
  let idx=0;

  rows.forEach((row,i)=>{
    row.classList.remove("win","lose");
  });

  // recorrer columnas de J1, J2, J3
  for(let j=0;j<3;j++){
    const r1=parseInt(rows[0].children[j+1].querySelector("input").value)||0;
    const r2=parseInt(rows[1].children[j+1].querySelector("input").value)||0;
    if(r1>r2) wins[0]++; else if(r2>r1) wins[1]++;
  }

  if(wins[0]>=2){
    rows[0].classList.add("win");
    rows[1].classList.add("lose");
    match.querySelector(".next").textContent=rows[0].children[0].textContent;
    propagate(match.dataset.id, rows[0].children[0].textContent);
  }else if(wins[1]>=2){
    rows[1].classList.add("win");
    rows[0].classList.add("lose");
    match.querySelector(".next").textContent=rows[1].children[0].textContent;
    propagate(match.dataset.id, rows[1].children[0].textContent);
  }else{
    match.querySelector(".next").textContent="Ganador";
  }
}

function propagate(matchId, winnerName){
  const match=document.querySelector(`.match[data-id="${matchId}"]`);
  if(!match) return;
  const nextId=match.dataset.next;
  if(!nextId) return;
  const nextMatch=document.querySelector(`.match[data-id="${nextId}"]`);
  if(!nextMatch) return;
  const rows=nextMatch.querySelectorAll("tr.team");
  if(matchId.startsWith("QF1")||matchId.startsWith("QF2")){
    rows[0].children[0].textContent=winnerName;
  }else if(matchId.startsWith("QF3")||matchId.startsWith("QF4")){
    rows[1].children[0].textContent=winnerName;
  }else if(matchId.startsWith("SF1")){
    rows[0].children[0].textContent=winnerName;
  }else if(matchId.startsWith("SF2")){
    rows[1].children[0].textContent=winnerName;
  }
}

document.querySelectorAll(".match").forEach(match=>{
  match.querySelectorAll("input").forEach(inp=>{
    inp.addEventListener("input",()=>updateMatch(match));
  });
});
</script>
</body>
</html>
